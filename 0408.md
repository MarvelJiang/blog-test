# JS函数的执行时机
## 以下代码为何会打出6个6
``````
let i = 0
for(i = 0; i<6; i++){
  setTimeout(()=>{
    console.log(i)
  },0)
}
``````
函数 setTimeout 接受两个参数：待加入队列的消息（`console.log(i)`）和一个时间值（可选，此处为0）.这个时间值代表了消息被实际加入到队列的最小延迟时间。如果队列中没有其它消息并且栈为空，在这段延迟时间过去之后，消息会被马上处理。但是，如果有其它消息（计算i的值），setTimeout 消息必须等待其它消息（计算i的值）处理完。因此第二个参数仅仅表示最少延迟时间，而非确切的等待时间。
所以`console.log(i)`的执行必须等到i一直从1算到6之后，打印6次，因为最后i=6，所以打印出6个6。
## for和let一起用让上面代码打印出0、1、2、3、4、5
``````
for(let i = 0; i<6; i++){
  setTimeout(()=>{
    console.log(i)
  },0)
}
``````
## 其他方法打印出0、1、2、3、4、5
``````
for( let i = 0; i < 6; i++ ) {
  (function(){
    setTimeout(() => {
      console.log(i);
    }, 0);
  })(i)
}           //隔离变量作用域？
``````

